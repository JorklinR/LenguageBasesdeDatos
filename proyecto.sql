
--CREACION DE LAS TABLAS
-Tabla de Proveedor 
 CREATE TABLE PROVEEDOR(
ID_PROVEEDOR number(10), 
NOMBRE_PROVEEDOR varchar2(25),
DIRECCION_PROVEEDOR VARCHAR2(300), -- Ciudad, Estado, Pais
NUMERO_TELEFONO_PROVEEDOR number(10),
CORREO_ELECTRONICO_PROVEEDOR VARCHAR2(30)
); 

ALTER TABLE PROVEEDOR 
ADD CONSTRAINT pk_tb_proveedor PRIMARY KEY(ID_PROVEEDOR);

--Tabla de Producto
 CREATE TABLE PRODUCTO(
ID_PRODUCTO number(10),
ID_PROVEEDOR number(10), -- FK al proveedor del producto
NOMBRE_PRODUCTO varchar2(25),
TIPO_PRODUCTO number(10), -- FK al tipo de producto segun la categoria
SERIE_PRODUCTO number(20),
MODELO_PRODUCTO VARCHAR2(30),
MARCA_PRODUCTO VARCHAR2(20),
CANTIDAD_STOCK NUMBER(10)
); 

ALTER TABLE PRODUCTO 
ADD CONSTRAINT pk_tb_producto PRIMARY KEY(ID_PRODUCTO);


--Tabla de Cliente
 CREATE TABLE CLIENTE(
ID_CLIENTE number(10),
NOMBRE_CLIENTE varchar2(50),
DIRECCION_CLIENTE  VARCHAR2(80), -- Ciudad, Estado, Pais
NUMERO_TELEFONO_CLIENTE number(10),
CORREO_ELECTRONICO_CLIENTE varchar2(30)
); 

ALTER TABLE CLIENTE 
ADD CONSTRAINT pk_tb_cliente PRIMARY KEY(ID_CLIENTE);


--Tabla de Usuario
 CREATE TABLE USUARIO(
ID_EMPLEADO number(10),
--ID_TIPO_USUARIO number(10),
NOMBRE_EMPLEADO VARCHAR2(100),
CORREO VARCHAR2 (100),
PASSWORD VARCHAR2 (100)
); 

ALTER TABLE USUARIO 
ADD CONSTRAINT pk_tb_usuario PRIMARY KEY(ID_EMPLEADO);


--Tabla de Inventario
CREATE TABLE INVENTARIO(
ID_HISTORICO number(10),
ID_PRODUCTO number(10),
ID_MOVIMIENTO NUMBER(10),
STOCK NUMBER(10)
); 
ALTER TABLE INVENTARIO 
ADD CO NSTRAINT pk_tb_inventario PRIMARY KEY(ID_HISTORICO);


--Tabla de Tipo de Producto
CREATE TABLE TIPO_PRODUCTO(
ID_CATEGORIA number(10),
DESCRIPCION_CATEGORIA_TIPO_PRODUCTO VARCHAR2(300)
); 
ALTER TABLE TIPO_PRODUCTO 
ADD CONSTRAINT pk_tb_tipo_producto PRIMARY KEY(ID_CATEGORIA);


--Tabla de Movimiento_Invetario
CREATE TABLE MOVIMIENTO_INVENTARIO(
ID_MOVIMIENTO number(10), -- PK
ID_TIPO_MOVIMIENTO number(10),
NUM_ORDEN number(10),
ID_CLIENTE number(10), -- FK para conocer los datos del cliente
FECHA_MOVIMIENTO DATE,
ID_PRODUCTO NUMBER(10), --FK de la info del producto
CANTIDAD_MOVIMIENTO NUMBER(10),
ID_EMPLEADO NUMBER(10) -- FK de la info del empleado
); 
ALTER TABLE MOVIMIENTO_INVENTARIO 
ADD CONSTRAINT pk_tb_movimiento_inventario PRIMARY KEY(ID_MOVIMIENTO);


--Tabla de tipo movimientos
CREATE TABLE TIPOS_MOVIMIENTOS(
ID_TIPO_MOVIMIENTO number(10), 
CATEGORIA VARCHAR2(7) -- Salida o Entrada

); 
ALTER TABLE TIPOS_MOVIMIENTOS 
ADD CONSTRAINT pk_tb_tipos_movimientos PRIMARY KEY(ID_MOVIMIENTO);

------------------------------------------CREACION de AutoIncrements------------------------------------

--CREACION DE AUTOINCREMENT PARA USUARIOS
create sequence autoUsuario
  start with 1
  increment by 1
  maxvalue 99999
  minvalue 1;
  
  
--CREACION DE AUTOINCREMENT PARA PRODUCTOS
create sequence autoProductos
  start with 1
  increment by 1
  maxvalue 99999
  minvalue 1;
  

  
--CREACION DE AUTOINCREMENT PARA CLIENTE
create sequence autoCliente
  start with 1
  increment by 1
  maxvalue 99999
  minvalue 1;
  
  
--CREACION DE AUTOINCREMENT PARA PROVEEDOR
create sequence autoProveedor
  start with 1
  increment by 1
  maxvalue 99999
  minvalue 1;
  
  
--CREACION DE AUTOINCREMENT PARA HISTORICO DE INVENTARIO
create sequence autoHistorico
  start with 1
  increment by 1
  maxvalue 99999
  minvalue 1;


  ---Creacion de FK para las tablas.

ALTER TABLE PRODUCTO
ADD CONSTRAINT fk_tb_proveedor FOREIGN KEY (ID_PROVEEDOR)
REFERENCES PROVEEDOR (ID_PROVEEDOR);

ALTER TABLE PRODUCTO
ADD CONSTRAINT fk_tb_tipo_producto FOREIGN KEY (TIPO_PRODUCTO)
REFERENCES TIPO_PRODUCTO (ID_CATEGORIA);

ALTER TABLE INVENTARIO
ADD CONSTRAINT fk_tb_producto FOREIGN KEY (ID_PRODUCTO)
REFERENCES PRODUCTO (ID_PRODUCTO);

ALTER TABLE INVENTARIO
ADD CONSTRAINT fk_tb_movimiento_inventario FOREIGN KEY (ID_MOVIMIENTO)
REFERENCES MOVIMIENTO_INVENTARIO (ID_MOVIMIENTO);

ALTER TABLE MOVIMIENTO_INVENTARIO
ADD CONSTRAINT fk_tb_tipos_movimientos FOREIGN KEY (ID_TIPO_MOVIMIENTO)
REFERENCES TIPOS_MOVIMIENTOS (ID_TIPO_MOVIMIENTO);

ALTER TABLE MOVIMIENTO_INVENTARIO
ADD CONSTRAINT fk_tb_cliente FOREIGN KEY (ID_CLIENTE)
REFERENCES CLIENTE (ID_CLIENTE);

ALTER TABLE MOVIMIENTO_INVENTARIO
ADD CONSTRAINT fk_tb_usuario FOREIGN KEY (ID_EMPLEADO)
REFERENCES USUARIO (ID_EMPLEADO);



------------------------------------------INSERTs del Proyecto------------------------------------------

INSERT INTO PROVEEDOR VALUES (1, 'Cisco', 'California, USA', 88888888, 'customercontact@cisco.com');
INSERT INTO PROVEEDOR VALUES (2, 'HPE', 'Washington, USA', 98888888, 'customercontact@hpe.com');
INSERT INTO PROVEEDOR VALUES (3, 'DELL', 'Washington, USA', 78451263, 'customercontact@dell.com');

INSERT INTO CLIENTE VALUES (1, 'FIFCO', 'Cerveceria Nacional, Heredia', 22404022, 'contactoproveedor@fifco.com');
INSERT INTO CLIENTE VALUES (2, 'KIMBERLLY CLARK', 'BELEN, Heredia', 23414123, 'contactoproveedor@kclark.com');

INSERT INTO USUARIO VALUES (1, 'Owen Smith Rivera','owenlda252@gmailcom','prueba123');
INSERT INTO USUARIO VALUES (2, 'Jorklin Rodriguez Marin','jorklin2009@hotmail.com','prueba123');


INSERT INTO TIPO_PRODUCTO VALUES (1, 'Terminal');
INSERT INTO TIPO_PRODUCTO VALUES (2, 'Servidor');

INSERT INTO TIPOS_MOVIMIENTOS VALUES (1, 'Salida');
INSERT INTO TIPOS_MOVIMIENTOS VALUES (2, 'Salida');

INSERT INTO PRODUCTO VALUES (1500, 2,'Think Client', 1 ,21342123123114546545, 'GEN 10', 'HP INC', 150);
INSERT INTO PRODUCTO VALUES (1501, 3,'DELL EMC', 2, 21342145893114546545, 'GEN 12', 'DELL', 6);

INSERT INTO INVENTARIO VALUES (1, 1500, 1);
INSERT INTO INVENTARIO VALUES (2, 1501, 2);

INSERT INTO MOVIMIENTO_INVENTARIO VALUES (1, 1, 2200, 1, sysdate, 1500, 5, 1);
INSERT INTO MOVIMIENTO_INVENTARIO VALUES (2, 2, 5123, 2, sysdate, 1501, 3, 2);
